---
title: What's New in v3.5
teaser: New features and how to upgrade
menu:
  - ['New Features', 'features']
  - ['Upgrading Notes', 'upgrading']
---

## New features {#features hidden="true"}

spaCy v3.5 introduces three new CLI commands, `apply`, `benchmark` and
`find-threshold`, provides improvements and extensions to our entity linking
functionality, XXX

### New CLI commands {#cli}

TODO `apply`

TODO `benchmark`

TODO `find-threshold`

### Entity linking generalization {#el}

The knowledge base used for entity linking is now easier to customize and has a
new default implementation [`InMemoryLookupKB`](/api/kb_in_memory).

### Additional features and improvements {#additional-features-and-improvements}

- Language updates:
  - Extended support for Slovenian.
  - Fixed lookup fallback for French and Catalan lemmatizers.
  - Switch Russian and Ukrainian lemmatizers to `pymorphy3`.
  - Support for editorial punctuation in Ancient Greek.
  - Update to Russian tokenizer exceptions.
  - Small fix for Dutch stop words.
- Allow up to `typer` v0.7.x, `mypy` 0.990 and `typing_extensions` v4.4.x.
- New `spacy.ConsoleLogger.v3` with expanded progress
  [tracking](/api/top-level#ConsoleLogger).
- Improved scoring behavior for `textcat` with `spacy.textcat_scorer.v2` and
  `spacy.textcat_multilabel_scorer.v2`.

- Updates so that downstream components can train properly on a frozen `tok2vec`
  or `transformer` layer.
- Allow interpolation of variables in directory names in projects.
- Support for local file system [remotes](/usage/projects#remote) for projects.
- Improve UX around `displacy.serve` when the default port is in use.
- Optional `before_update` callback that is invoked at the start of each
  [training step](/api/data-formats#config-training).
- Improve performance of `SpanGroup` and fix typing issues for `SpanGroup` and
  `Span` objects.
- Patch a
  [security vulnerability](https://github.com/advisories/GHSA-gw9q-c7gh-j9vm) in
  extracting tar files.
- Add equality definition for `Vectors`.
- Ensure `Vocab.to_disk` respects the exclude setting for `lookups` and
  `vectors`.
- Correctly handle missing annotations in the edit tree lemmatizer.

### Trained pipeline updates {#pipelines}

- The CNN pipelines add `IS_SPACE` as a `tok2vec` feature for `tagger` and
  `morphologizer` components to improve tagging of non-whitespace vs. whitespace
  tokens.
- The transformer pipelines require `spacy-transformers` v1.2, which uses the
  exact alignment from `tokenizers` for fast tokenizers instead of the heuristic
  alignment from `spacy-alignments`. For all trained pipelines except
  `ja_core_news_trf`, the alignments between spaCy tokens and transformer tokens
  may be slightly different. More details about the `spacy-transformers` changes
  in the
  [v1.2.0 release notes](https://github.com/explosion/spacy-transformers/releases/tag/v1.2.0).

## Notes about upgrading from v3.4 {#upgrading}

### Validation of textcat values {#textcat-validation}

An error is now raised when unsupported values are given as input to train a
`textcat` or `textcat_multilabel` model - ensure that values are `0.0` or `1.0`
as explained in the [docs](/api/textcategorizer#assigned-attributes).

### Updated default scores for tokenization and textcat {#scores}

We fixed a bug that inflated the `token_acc` scores in v3.0-v3.4. The reported
`token_acc` will drop from v3.4 to v3.5, but if `token_p/r/f` stay the same,
your tokenization performance has not changed from v3.4.

For new `textcat` or `textcat_multilabel` configs, the new default `v2` scorers:

- ignore `threshold` for `textcat`, so the reported `cats_p/r/f` may increase
  slightly in v3.5 even though underlying performance is unchanged
- report the performance of only the **final** `textcat` or `textcat_multilabel`
  component in the pipeline by default
- custom scorers can be used to score multiple `textcat` and
  `textcat_multilabel` components with the built-in `Scorer.score_cats` scorer

### Pipeline package version compatibility {#version-compat}

> #### Using legacy implementations
>
> In spaCy v3, you'll still be able to load and reference legacy implementations
> via [`spacy-legacy`](https://github.com/explosion/spacy-legacy), even if the
> components or architectures change and newer versions are available in the
> core library.

When you're loading a pipeline package trained with an earlier version of spaCy
v3, you will see a warning telling you that the pipeline may be incompatible.
This doesn't necessarily have to be true, but we recommend running your
pipelines against your test suite or evaluation data to make sure there are no
unexpected results.

If you're using one of the [trained pipelines](/models) we provide, you should
run [`spacy download`](/api/cli#download) to update to the latest version. To
see an overview of all installed packages and their compatibility, you can run
[`spacy validate`](/api/cli#validate).

If you've trained your own custom pipeline and you've confirmed that it's still
working as expected, you can update the spaCy version requirements in the
[`meta.json`](/api/data-formats#meta):

```diff
- "spacy_version": ">=3.3.0,<3.5.0",
+ "spacy_version": ">=3.3.0,<3.6.0",
```

### Updating v3.4 configs

To update a config from spaCy v3.4 with the new v3.5 settings, run
[`init fill-config`](/api/cli#init-fill-config):

```cli
$ python -m spacy init fill-config config-v3.4.cfg config-v3.5.cfg
```

In many cases ([`spacy train`](/api/cli#train),
[`spacy.load`](/api/top-level#spacy.load)), the new defaults will be filled in
automatically, but you'll need to fill in the new settings to run
[`debug config`](/api/cli#debug) and [`debug data`](/api/cli#debug-data).
